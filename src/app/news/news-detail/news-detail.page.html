<ion-header>
  <ion-toolbar color="primary">
    <ion-title><strong>DigiNewsfeed</strong></ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/news"></ion-back-button>
    </ion-buttons>
    <!-- <ion-buttons slot="end">
      <ion-button (click)="onComment()">
        <ion-icon slot="icon-only" name="chatbox-ellipses-sharp"></ion-icon>
      </ion-button>
    </ion-buttons> -->
  </ion-toolbar>
</ion-header>

<ion-content [scrollEvents]="true" *ngIf="loadedArticle">
  <ion-grid>
    <ion-row *ngIf="loadedArticle?.imageUrl">
      <ion-col>
        <img [src]="loadedArticle?.imageUrl" class="a-img" />
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <h3 class="a-title"><strong>{{ loadedArticle?.title }}</strong></h3>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <p class="a-info">
          <span class="a-icon" *ngIf="loadedArticle?.category === 'Health'"
            ><ion-icon name="medkit-sharp"></ion-icon
          ></span>
          <span class="a-icon" *ngIf="loadedArticle?.category === 'Climate'"
            ><ion-icon name="earth-sharp"></ion-icon
          ></span>
          <span class="a-icon" *ngIf="loadedArticle?.category === 'Politics'"
            ><ion-icon name="people-sharp"></ion-icon
          ></span>
          <span class="a-icon" *ngIf="loadedArticle?.category === 'Economy'"
            ><ion-icon name="stats-chart-sharp"></ion-icon
          ></span>
          <span
            class="a-icon"
            *ngIf="loadedArticle?.category === 'Entertainment'"
            ><ion-icon name="sparkles-sharp"></ion-icon
          ></span>
          {{ loadedArticle?.category }} - {{ loadedArticle?.readingTime }} min
          read
          <br />
          <span *ngIf="subgroup%2==1 && loadedArticle?.author !== 'unspecified'"
            ><span class="a-icon"
              ><ion-icon name="person-sharp"></ion-icon></span
            ><span class="a-meta"
              >By our {{ loadedArticle?.author }}</span
            ><br
          /></span>
          <span *ngIf="subgroup%2==0"
            ><span class="a-icon"
              ><ion-icon name="person-sharp"></ion-icon></span
            ><span class="a-meta"
              >Generated by artificial intelligence</span
            ><br
          /></span>
          <span class="a-icon"
            ><ion-icon name="calendar-sharp"></ion-icon
          ></span>
          {{ loadedArticle?.publishedDate }}
        </p>
      </ion-col>
    </ion-row>
    <!-- <ion-row>
      <ion-col>
        <hr class="a-separator-comment">
      </ion-col>
    </ion-row> -->
    <!-- <ion-row>
      <ion-col>
        <p class="a-info">
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) >= 1"
            ><ion-icon name="star"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) >= 2"
            ><ion-icon name="star"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) >= 3"
            ><ion-icon name="star"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) >= 4"
            ><ion-icon name="star"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) >= 5"
            ><ion-icon name="star"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) === 0.0"
            ><ion-icon name="star-outline"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) < 1.5"
            ><ion-icon name="star-outline"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) === 1.5"
            ><ion-icon name="star-half"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) < 2.5"
            ><ion-icon name="star-outline"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) === 2.5"
            ><ion-icon name="star-half"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) < 3.5"
            ><ion-icon name="star-outline"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) === 3.5"
            ><ion-icon name="star-half"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) < 4.5"
            ><ion-icon name="star-outline"></ion-icon
          ></span>
          <span
            class="a-rating"
            *ngIf="roundRating(loadedArticle?.rating) === 4.5"
            ><ion-icon name="star-half"></ion-icon></span
          >
        </p>
      </ion-col>
    </ion-row> -->
    <ion-row>
      <ion-col>
        <hr class="a-separator" />
      </ion-col>
    </ion-row>
    <ion-row *ngIf="loadedContent">
      <ion-col>
        <p [innerHtml]="loadedContent"></p>
      </ion-col>
    </ion-row>
    <div *ngIf="loadedComment !== undefined">
      <ion-row>
        <ion-col>
          <hr
            class="a-separator-comment"
          />
        </ion-col>
      </ion-row>
      <ion-row *ngIf="loadedComment">
        <ion-col>
          <ion-card class="a-comment-card">
            <ion-card-content class="a-comment-content">
              <span class="a-comment-text"
                ><strong>{{ loadedComment['text'] }}</strong></span
              >
              <p>{{ loadedComment['created_at'] | date: 'medium' }}</p>
            </ion-card-content>
            <ion-item>
              <ion-label slot="start"
                ><p class="a-comment-user">Anonymous user</p></ion-label
              >
              <ion-button
                small
                fill="outline"
                slot="end"
                (click)="onDeleteComment(loadedComment)"
                >Delete</ion-button
              >
            </ion-item>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="!loadedComment">
        <ion-col>
          <ion-card class="a-comment-card">
            <ion-card-content>
              <span class="a-comment-text">
                <strong
                  >No comments have been posted yet, add your own comment
                  below!</strong
                >
              </span>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <hr
            class="a-separator-comment"
          />
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-textarea
            [(ngModel)]="commentMessage"
            type="text"
            placeholder="Write your comment here.."
          ></ion-textarea>
          <ion-button small (click)="onComment()"
            >Comment
            <ion-icon slot="end" name="chatbox-ellipses-sharp"></ion-icon
          ></ion-button>
          <ion-button small (click)="onRating()" class="a-rating-btn"
            >Rate <ion-icon slot="end" name="star-half"></ion-icon
          ></ion-button>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>
<ion-footer> </ion-footer>
